openapi: 3.0.1
info:
  title: ASR Training Pipeline Beta
  description: |+
    This Voice microservice combines Voice Activity Detection feature and Automatic Speech Recognition capabilities. It detects speech in an audio file (.wav format) and transcribes English speech content from the audio stream into text. The transcript text is timestamped for each utterance. An utterance is a continuous piece of speech beginning and ending with a clear pause.
    This microservice can be used on generic English or on specific use cases or accents. There are currently additional models available for Singaporean-accented for prepared speech (16kHz) or telephony (8kHz). For best performance, select the model which best matches the use-case.
  version: '0.1.0'
  x-subscribelink: asr_with_voice_activity_detection_eng
  x-apitype: large file
  x-apitypedescription: |+
    Asyncronous | Batch | 1GB/File.
  x-inputfilelimit: |+
    Process up to 1 GB of File Size.
  x-responsetime: |+
    The response rate is slower than the small file API due to large data
  x-billingmethod: |+
    The API is billed by the amount of data transferred.
  x-notes: |+
    Size cannot exceed 1 GB.
  x-apidetailsdesc: |+
    Kindly note that large file / asynchronous processing requires multiple steps and calling multiple API end-points sequentially to complete the entire processing.
servers:
  - url: 'https://dev-apis.sentient.io'
tags:
- name: "v0.1.0"
  description: "Depreciation Date - May 31, 2022"
paths:
  /async/microservices/trainingpipeline/asrtraining/v2/getuploadurl:
    description: |+
      Get the pre-signed url to upload the file.
    post:
      tags:
        - v0.1.0
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success'
              example: 
                message: Successfully Processed
                results:
                  fields:
                    content-type: audio/wav
                    key: 1813/1813/2592/asrtraining/v2/input/test_model_lessmem.zip
                    policy: eyJjb25kaXRpb25zIjpbWyJlcSIsIiRDb250ZW50LVR5cGUiLCJhcHBsaWNhdGlvbi96aXAiXSxbImNvbnRlbnQtbGVuZ3RoLXJhbmdlIiwwLDQ2NzAzNDk2XSx7ImNvbnRlbnQtdHlwZSI6ImFwcGxpY2F0aW9uL3ppcCJ9LHsieC1nb29nLW1ldGEtb2lkIjoiMTgxMyJ9LHsieC1nb29nLW1ldGEtdWlkIjoiMjU5MiJ9LHsieC1nb29nLW1ldGEtdXBsb2FkZXIiOiJlMzg2OTRlYzRlM2E0NDE2YjRhZGZlNTNhODY4MjI1YSJ9LHsieC1nb29nLW1ldGEtdXVpZCI6IjNkNmQzODgxNDMzZTQ0NTA5MzI4ODUwZTMyYWVhNTYwIn0seyJidWNrZXQiOiJvbmJvYXJkaW5nX21vZGVscyJ9LHsia2V5IjoiMTgxMy8xODEzLzI1OTIvYXNydHJhaW5pbmcvdjIvaW5wdXQvdGVzdF9tb2RlbF9sZXNzbWVtLnppcCJ9LHsieC1nb29nLWRhdGUiOiIyMDIzMDExMVQxMzI2MDJaIn0seyJ4LWdvb2ctY3JlZGVudGlhbCI6InNlbnRpZW50LWRldi1iaWdxdWVyeUBzZW50aWVudC0yMDczMTAuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20vMjAyMzAxMTEvYXV0by9zdG9yYWdlL2dvb2c0X3JlcXVlc3QifSx7IngtZ29vZy1hbGdvcml0aG0iOiJHT09HNC1SU0EtU0hBMjU2In1dLCJleHBpcmF0aW9uIjoiMjAyMy0wMS0xMVQxNDoyNjowMi45Nzg2OTBaIn0=
                    x-goog-algorithm: GOOG4-RSA-SHA256
                    x-goog-credential: sentient-dev-bigquery@sentient-207310.iam.gserviceaccount.com/20230111/auto/storage/goog4_request
                    x-goog-date: 20230111T132602Z
                    x-goog-meta-oid: '1813'
                    x-goog-meta-uid: '2592'
                    x-goog-meta-uploader: 'e38694ec4e3a4416b4adfe53a868225a'
                    x-goog-meta-uuid: 3d6d3881433e44509328850e32aea560
                    x-goog-signature: 5b96e4a45093fc5b3f8309c521568b9feadf3a849b0a34ce3fb49a683474f46a49bb20b77f21724d8a1819f6f9578a24972664f3dde457472380bc55003fd61aebf6b8af0ebb058a41c4d1b846294b14688231a945064604b314d5ab95a901ba80c4c6903800fa2761b0b400e0bdefa9f4df59cec99e07c51445b545d12108e2d27799d67f4950f0aa6af967e72dd06dd3301fd84b187e4048b32e62d450a43ab4f55f5e1e2f473d7190dcc204ada8c52aa006b6e53572b97eb33e27b96e479728a6bc425edb8eedb27726eebdcd2ebed031297e9380d307cb405e5054d76bd29274dd2b96014b76e63ece3c50c28c727a0dae5e4d4509f6680df691eb1853b7
                  request_cost: 0.1019
                  url: https://storage.googleapis.com/onboarding_models/
                status: Success
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/unauthorized'
        '402':
          description: Payment Required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/paymentrequired'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/forbidden'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notfound'
        '419':
          description: Input Field Missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputfieldmissing'
        '413':
          description: Payload Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputlimitexceeded'
        '415':
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/invalidinput'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/servererror'
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/gatewaytimeout'
      security:
        - APIAuthorizer: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/input'
        required: true
  /upload:
    description: |+
      Upload your file to start processing.
    post:
      servers:
        - url: 'https://storage.googleapis.com/onboarding_models/'
          description: Override base path for the GET /ping operation    
      tags:
        - v0.1.0
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/uploadinput'
        required: true          
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/success'
              example: 
                message: Successfully Processed         
  /async/microservices/trainingpipeline/asrtraining/v2/getstatus:
    description: |+
      Query for processing status.
    get:
      tags:
        - v0.1.0
      parameters:
        - in: query
          name: jid
          schema:
            type: string
          example: 36d075917dcd481e9daf858a2549f3b1
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/getsuccess'
              example:
                message: Successfully Processed
                docs_url: https://storage.googleapis.com/user_space_dev
                request_cost: 0.0298
                status: Success

        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/unauthorized'
        '402':
          description: Payment Required
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/paymentrequired'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/forbidden'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/notfound'
        '419':
          description: Input Field Missing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputfieldmissing'
        '413':
          description: Payload Too Large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inputlimitexceeded'
        '415':
          description: Unsupported Media Type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/invalidinput'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/servererror'
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/gatewaytimeout'
      security:
        - APIAuthorizer: []
components:
  schemas:
    getsuccess:
      type: object
      properties:
        message:
          type: string
          example: File Processing Successfully Started
          description: Detail description on the API status
        request_cost:
          type: string
          example: 0.086
          description: Detail description on the API status
        status:
          type: string
          example: Processing
          description: Detail description on the API status
    success:
      type: object
      properties:
        message:
          type: string
          example: Successfully Processed
          description: Detail description on the API status
        results:
          type: object
          example: { "<Json": "Object>" }
          description: Json Object of returned results
          properties:   
            fields:
              type: object
              example: { "<Json": "Object>" }
              description: Json Object of returned results
              properties:
                content-type:
                  type: string
                  example: application/zip
                  description: Content type of the document
                policy:
                  type: string
                  example: eyJjb25kaXRpb25zIjpbWyJlcSIsIiRDb250ZW50LVR5cGUiLCJ...
                  description: Content type of the document
                x-goog-algorithm:
                  type: string
                  example: GOOG4-RSA-SHA256
                  description: Google algorithm
                x-goog-credential:
                  type: string
                  example: sentient-dev-bigqu...
                  description: Google algorithm
                x-goog-date:
                  type: string
                  example: 20211123T105846Z
                  description: Google algorithm
                x-goog-meta-additional_param:
                  type: string
                  example: None
                  description: Google algorithm
                x-goog-meta-oid:
                  type: string
                  example: 1
                  description: Google algorithm
                x-goog-meta-uid:
                  type: string
                  example: 2
                  description: Google algorithm
                x-goog-meta-uuid:
                  type: string
                  example: 1991d4936ddb4728afaa06cb260b0253
                  description: Google algorithm
                x-goog-signature:
                  type: string
                  example: 3d882f0762743e39146aae926435bf0b15e844836dbcf...
                  description: Google algorithm
            jid:
              type: string
              example: 1991d4936ddb4728afaa06cb260b0253...
              description: Google algorithm 
            request_cost:
              type: string
              example: 0
              description: Google algorithm 
            url:
              type: string
              example: https://storage.googleapis.com/onboarding_models/
              description: Google algorithm 
        status:
          type: string
          example: Success
          description: The status of the API call success/failure                  
    unauthorized:
      type: object
      properties:
        message:
          type: string
          example: Missing Authentication Token
        status:
          type: string
          example: Failure
    forbidden:
      type: object
      properties:
        message:
          type: string
          example: Access Denied Unauthorized User
        status:
          type: string
          example: Failure
    paymentrequired:
      type: object
      properties:
        message:
          type: string
          example: Insufficient Credits Kindly Top Up
        status:
          type: string
          example: Failure
    notfound:
      type: object
      properties:
        message:
          type: string
          example: Invalid Request URL
        status:
          type: string
          example: Failure
    invalidinput:
      type: object
      properties:
        message:
          type: string
          example: Invalid input - Error in URL.
        status:
          type: string
          example: Failure
    servererror:
      type: object
      properties:
        message:
          type: string
          example: Internal Server Error
        status:
          type: string
          example: Failure
    gatewaytimeout:
      type: object
      properties:
        message:
          type: string
          example: Request Timeout
        status:
          type: string
          example: Failure
    inputfieldmissing:
      type: object
      properties:
        message:
          type: string
          example: Input Field Missing
        status:
          type: string
          example: Failure
    inputlimitexceeded:
      type: object
      properties:
        message:
          type: string
          example: Input Limit Exceeded
        status:
          type: string
          example: Failure 
    versions:
      type: object
      properties: 
        v0.1.0:
         type: array
         items:
          oneOf:
            - type: string
              example: Published Date - Dec 30, 2021
              x-details: Initial version release  
              description: Latest Version
    input:
      type: object
      required:
        - file_name
        - additional_param
      properties:
        file_name:
          x-name: file_name
          type: string
          default: true
          format: binary
          example: 'onboard_asr_input.zip'
          description: |+
            Name of file to be upload.
        file_size:
          x-name: file_size
          type: integer
          default: true
          example: 46698496
          description: |+
            Size of the file. Maximum size should be 1 GB.
        training_type:
          x-name: training_type
          type: string
          default: true
          example: 'new'
          description: |+
            specify the training type. There are two types: new and upgrade.
        model_name:
          x-name: model_name
          type: string
          default: true
          example: 'newsparliament1'
          description: |+
            Specify the model name.
        deployment_type:
          x-name: deployment_type
          type: string
          default: true
          example: 'deploy'
          description: |+
            Specify the deployment type. There are two types: deploy and download
        content_type:
          x-name: content_type
          type: string
          default: true
          example: 'application/zip'
          description: |+
            Specify the content-type. Pick any one from below list based on input file type.
            ["application/wav"]
        model_type:
          x-name: model_type
          type: string
          default: true
          example: 'offline'
          description: |+
            Specify the model type.
        base_model:
          x-name: base_model
          type: string
          example: 'news_parliament'
          description: |+
            Specify the base model
    uploadinput:
      type: object
      required:
        - file      
      properties:
        file:
          type: string
          format: binary
          default: true
          example: test_model_lessmem.zip
          description: file
        content-type:
          type: string
          default: false
          example: application/zip
          description: Fields
        key:
          type: string
          default: false
          example: 1813/1813/2592/asrtraining/v2/input/test_model_lessmem.zip
          description: Fields
        policy:
          type: string
          default: false
          example: eyJjb25kaXRpb25zIjpbWyJlcSIsIiRDb250ZW50LVR5cGUiLCJhcHBsaWNhdGlvbi9wZGYiXSxbImNvbnRlbnQtbGVuZ3RoLXJhbmdlIiwwLDE0MDczMjYxXSx7ImNvbnRlbnQtdHlwZSI6ImFwcGxpY2F0aW9uL3BkZiJ9LHsieC1nb29nLW1ldGEtYWRkaXRpb25hbF9wYXJhbSI6IntcInBhc3N3b3JkXCI6IFwiZmZmZmZcIn0ifSx7IngtZ29vZy1tZXRhLW9pZCI6IjEifSx7IngtZ29vZy1tZXRhLXVpZCI6IjIifSx7IngtZ29vZy1tZXRhLXV1aWQiOiJjZjNkMzI5YmQ5ZGY0Y2VmOTE5NjZjMzM2Mzg2ZWVhMyJ9LHsiYnVja2V0IjoidXNlcl9zcGFjZV9kZXYifSx7ImtleSI6IjEvMi9scC10ZXh0c3VtbWFyaXNhdGlvbi9pbnB1dC9QZGZfNm1iX2NmM2QzMjliZDlkZjRjZWY5MTk2NmMzMzYzODZlZWEzLnBkZiJ9LHsieC1nb29nLWRhdGUiOiIyMDIxMTIwOVQwOTU1MDdaIn0seyJ4LWdvb2ctY3JlZGVudGlhbCI6InNlbnRpZW50LWRldi1iaWdxdWVyeUBzZW50aWVudC0yMDczMTAuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20vMjAyMTEyMDkvYXV0by9zdG9yYWdlL2dvb2c0X3JlcXVlc3QifSx7IngtZ29vZy1hbGdvcml0aG0iOiJHT09HNC1SU0EtU0hBMjU2In1dLCJleHBpcmF0aW9uIjoiMjAyMS0xMi0wOVQxMDo1NTowNy41MDYwNDBaIn0=
          description: Fields
        x-goog-algorithm:
          type: string
          default: false
          example: GOOG4-RSA-SHA256
          description: Fields
        x-goog-credential:
          type: string
          default: false
          example: sentient-dev-bigquery@sentient-207310.iam.gserviceaccount.com/20230111/auto/storage/goog4_request
          description: Fields
        x-goog-date:
          type: string
          default: false
          example: 20220224T045625Z
          description: Fields          
        x-goog-meta-oid:
          type: string
          default: false
          example: 1813
          description: Fields
        x-goog-meta-uid:
          type: string
          default: false
          example: 2592
          description: Fields
        x-goog-meta-uploader:
          type: string
          default: false
          example: 01832842d1774e4fb711d31b30fa9431
          description: Fields           
        x-goog-meta-uuid:
          type: string
          default: false
          example: cf3d329bd9df4cef91966c336386eea3
          description: Fields
        x-goog-signature:
          type: string
          default: false
          example: 7970619677c2a0dc26af460a7d62f883528af9e1e8a1459aa09671ee0fbf15f7a611b7bd8c382fd8d39f74fe212a7e3db1768535f0c1ccff062239627ebe49195cc2c42c2238eb5e268ecaca49e647eb244eb023f3d4ba97922fd1228aab677a7176b9f84fef1c909897ccf0e1e8f9e3d030dbfc9892c7c026060dcf20b4ad4598f346de478b0f8495d9bce292b83a5b3bfa13c7dc08a2ce162f652c3bce91191167eeee3019b6b196e4271f5e3a6a1fe067f70acdaa082e6091c2f3ac8182bca8be41afc90600fc32dcdb3072acb43aaf90910a38c4aec9e3a42fdd21deb5ce936d8269e9ed011377ef058cac20d336218a35858753bd99b4ffdb1db171f0f4
          description: Fields             
  securitySchemes:
    APIAuthorizer:
      type: apiKey
      name: x-api-key
      in: header
      x-amazon-apigateway-authtype: custom
      description: Authentication is done using the x-api-key in the request header
